if (self.CavalryLogger) { CavalryLogger.start_js(["Pnklj"]); }

__d('AvailableListConstants',[],(function a(b,c,d,e,f,g){var h={ON_AVAILABILITY_CHANGED:'buddylist/availability-changed',ON_UPDATE_ERROR:'buddylist/update-error',ON_UPDATED:'buddylist/updated',ON_CHAT_NOTIFICATION_CHANGED:'chat-notification-changed',OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:'webStatus',FB_APP_STATUS:'fbAppStatus',MESSENGER_STATUS:'messengerStatus',OTHER_STATUS:'otherStatus',STATUS_ACTIVE:'active',STATUS_IDLE:'idle',STATUS_OFFLINE:'offline'};f.exports=h;}),null);
__d('ChatConfig',['ChatConfigInitialData'],(function a(b,c,d,e,f,g){var h={},i={get:function j(k,l){return k in h?h[k]:l;},set:function j(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l;}Object.assign(h,k);},getDebugInfo:function j(){return h;}};i.set(c('ChatConfigInitialData'));f.exports=i;}),null);
__d('PresenceUtil',['CurrentUser','randomInt'],(function a(b,c,d,e,f,g){var h=c('randomInt')(0,4294967295)+1;function i(){return h;}function j(){return c('CurrentUser').isLoggedInNow();}f.exports={getSessionID:i,hasUserCookie:j};}),null);
__d('PresencePrivacy',['Arbiter','AsyncRequest','ChannelConstants','CurrentUser','PresencePrivacyInitialData','JSLogger','PresenceUtil'],(function a(b,c,d,e,f,g){var h='/ajax/chat/privacy/settings.php',i='/ajax/chat/privacy/online_policy.php',j='/ajax/chat/privacy/visibility.php',k='friend_visibility',l='visibility',m='online_policy',n=babelHelpers['extends']({},c('PresencePrivacyInitialData').privacyData),o=c('PresencePrivacyInitialData').visibility,p=babelHelpers['extends']({},c('PresencePrivacyInitialData').privacyData),q=o,r=c('PresencePrivacyInitialData').onlinePolicy,s=r,t=[],u=false;function v(){return c('JSLogger').create('blackbird');}var w=Object.assign(new (c('Arbiter'))(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function x(ja){var ka;for(ka in ja){var la=ja[ka];if(ka==c('CurrentUser').getID()){v().error('set_viewer_visibility');throw new Error("Invalid to set current user's visibility");}switch(la){case w.WHITELISTED:case w.BLACKLISTED:case w.UNLISTED:break;default:v().error('set_invalid_friend_visibility',{id:ka,value:la});throw new Error("Invalid state: "+la);}}for(ka in ja)n[ka]=ja[ka];w.inform('privacy-changed');}function y(ja,ka){var la={};la[ja]=ka;x(la);}function z(ja){switch(ja){case w.ONLINE:case w.OFFLINE:break;default:v().error('set_invalid_visibility',{value:ja});throw new Error("Invalid visibility: "+ja);}o=ja;w.inform('privacy-changed');w.inform('privacy-user-presence-changed');}function aa(ja){switch(ja){case w.ONLINE_TO_WHITELIST:case w.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+ja);}r=ja;w.inform('privacy-user-presence-changed');w.inform('privacy-changed');}function ba(ja,ka){u=true;ja.send();}function ca(ja,ka){t.push({request:ja,data:ka});if(!u){var la=t.shift();ba(la.request,la.data);}}function da(ja,ka){var la=ja.type;if(la===k){w.inform('privacy-availability-changed');for(var ma in ja.settings)p[ma]=ja.settings[ma];}else{if(la===l){q=ja.visibility;}else if(la===m)s=ja.online_policy;w.inform('privacy-user-presence-response');}v().log('set_update_response',{data:ja,response:ka});}function ea(ja,ka){if(o!==q)z(q);if(r!==s)aa(s);Object.assign(n,p);w.inform('privacy-changed');t=[];v().log('set_error_response',{data:ja,response:ka});}function fa(ja){u=false;if(t.length>0){var ka=t.shift();ba(ka.request,ka.data);}}function ga(ja,ka){if(c('PresenceUtil')!=null){var la=ja.getData();la.window_id=c('PresenceUtil').getSessionID();ja.setData(la);}ja.setHandler(da.bind(this,ka)).setErrorHandler(ea.bind(this,ka)).setTransportErrorHandler(ea.bind(this,ka)).setFinallyHandler(fa.bind(this)).setAllowCrossPageTransition(true);return ja;}function ha(ja,ka,la){return ga(new (c('AsyncRequest'))(ja).setData(ka),la);}function ia(ja,ka){var la=ka.obj;if(la.viewer_id!=c('CurrentUser').getID()){v().error('invalid_viewer_for_channel_message',{type:ja,data:ka});throw new Error("Viewer got from the channel is not the real viewer");}if(la.window_id===c('PresenceUtil').getSessionID())return;var ma=la.data;if(la.event=='access_control_entry'){ma.target_ids.forEach(function(oa){y(oa,ma.setting);p[oa]=ma.setting;});}else{if(la.event=='visibility_update'){var na=!!ma.visibility?w.ONLINE:w.OFFLINE;z(na);q=na;}else if(la.event=='online_policy_update'){aa(ma.online_policy);s=ma.online_policy;}w.inform('privacy-user-presence-response');}v().log('channel_message_received',{data:ka.obj});}Object.assign(w,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function ja(ka,la,ma){},setVisibility:function ja(ka){q=o;z(ka);var la={visibility:ka},ma={type:l,visibility:ka},na=ha(j,la,ma);ca(na,ma);v().log('set_visibility',{data:la});return ka;},getVisibility:function ja(){return o;},setOnlinePolicy:function ja(ka){s=r;aa(ka);var la={online_policy:ka},ma={type:m,online_policy:ka},na=ha(i,la,ma);ca(na,ma);v().log('set_online_policy',{data:la});return ka;},getOnlinePolicy:function ja(){return r;},getFriendVisibility:function ja(ka){return n[ka]||w.UNLISTED;},isUserOffline:function ja(){return this.getVisibility()===w.OFFLINE;},allows:function ja(ka){if(this.isUserOffline())return false;var la=this.getOnlinePolicy();return la===w.ONLINE_TO_WHITELIST?n[ka]==w.WHITELISTED:n[ka]!=w.BLACKLISTED;},setFriendsVisibility:function ja(ka,la){if(ka.length>0){var ma={};for(var na=0;na<ka.length;na++){var oa=ka[na];p[oa]=n[oa];ma[oa]=la;}x(ma);var pa=la;if(pa==w.UNLISTED)pa=p[ka[0]];var qa={users:ka,setting:la,setting_type:pa},ra={type:k,settings:ma},sa=ha(h,qa,ra);ca(sa,ra);v().log('set_friend_visibility',{data:qa});}return la;},setFriendVisibilityMap:function ja(ka,la){for(var ma in ka)p[ma]=n[ma];x(ka);var na={type:k,settings:ka};ca(ga(la,na),na);v().log('set_friend_visibility_from_map',{data:ka});},allow:function ja(ka){if(this.allows(ka)){v().error('allow_already_allowed');throw new Error("allow() should only be called for users that "+"are not already allowed");}if(this.getVisibility()===w.OFFLINE){v().error('allow_called_while_offline');throw new Error("allow() should only be called when the user is already online");}var la=this.getOnlinePolicy()===w.ONLINE_TO_WHITELIST?w.WHITELISTED:w.UNLISTED;return this.setFriendsVisibility([ka],la);},disallow:function ja(ka){if(!this.allows(ka)){v().error('disallow_already_disallowed');throw new Error("disallow() should only be called for users that "+"are not already disallowed");}if(this.getVisibility()===w.OFFLINE){v().error('disallow_called_while_offline');throw new Error("disallow() should only be called when the user is already online");}var la=this.getOnlinePolicy()===w.ONLINE_TO_BLACKLIST?w.BLACKLISTED:w.UNLISTED;return this.setFriendsVisibility([ka],la);},getBlacklist:function ja(){var ka=[];for(var la in n)if(n[la]===w.BLACKLISTED)ka.push(la);return ka;},getWhitelist:function ja(){var ka=[];for(var la in n)if(n[la]===w.WHITELISTED)ka.push(la);return ka;},getMapForTest:function ja(){return n;},setMapForTest:function ja(ka){n=ka;}});w.inform('privacy-changed');w.inform('privacy-user-presence-changed',c('Arbiter').BEHAVIOR_STATE);v().log('initialized',{visibility:o,policy:r});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(ja,ka){ka.presence_privacy={initial:c('PresencePrivacyInitialData').privacyData,current:n};});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('privacy_changed'),ia.bind(this));c('Arbiter').subscribe(c('ChannelConstants').ON_CONFIG,function(ja,ka){var la=ka.getConfig('visibility',null);if(la!==null&&typeof la!=='undefined'){var ma=la?w.ONLINE:w.OFFLINE;z(ma);v().log('config_visibility',{vis:ma});}}.bind(this));f.exports=w;}),null);
__d('ChatVisibility',['Arbiter','JSLogger','PresencePrivacy'],(function a(b,c,d,e,f,g){var h={isOnline:function i(){return c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE;},hasBlackbirdEnabled:function i(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function i(){return c('PresencePrivacy').getOnlinePolicy()===c('PresencePrivacy').ONLINE_TO_BLACKLIST&&c('PresencePrivacy').getBlacklist().length>0;},isVisibleToSomeFriends:function i(){return c('PresencePrivacy').getOnlinePolicy()===c('PresencePrivacy').ONLINE_TO_WHITELIST&&c('PresencePrivacy').getWhitelist().length>0;},goOnline:function i(j){if(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').OFFLINE){c('JSLogger').create('blackbird').log('chat_go_online');c('PresencePrivacy').setVisibility(c('PresencePrivacy').ONLINE);c('Arbiter').inform('chat-visibility/go-online');}j&&j();},goOffline:function i(j){if(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE){c('JSLogger').create('blackbird').log('chat_go_offline');c('PresencePrivacy').setVisibility(c('PresencePrivacy').OFFLINE);c('Arbiter').inform('chat-visibility/go-offline');}j&&j();},toggleVisibility:function i(){if(h.isOnline()){h.goOffline();}else h.goOnline();}};f.exports=h;}),null);
__d('Poller',['ArbiterMixin','AsyncRequest','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(l){'use strict';i.constructor.call(this);this._config=babelHelpers['extends']({clearOnQuicklingEvents:true,setupRequest:c('emptyFunction'),maxRequests:Infinity},l);this._handle=null;this._isSkipIndefinitely=false;this._hasSkippedRequest=false;this._requests=0;this._muted=false;this._polling=false;this._skip=false;this._cancelRequest=c('emptyFunction');if(!this._config.dontStart)this.start();}j.prototype.start=function(){'use strict';if(this._polling)return this;this._requests=0;this.request();return this;};j.prototype.stop=function(){'use strict';this._cancelRequest();return this;};j.prototype.mute=function(){'use strict';this._muted=true;return this;};j.prototype.resume=function(){'use strict';if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}if(this._isSkipIndefinitely){this._isSkipIndefinitely=false;return this.request();}return this;};j.prototype.skip=function(){'use strict';this._skip=true;return this;};j.prototype.startSkipIndefinitely=function(){'use strict';this._isSkipIndefinitely=true;return this;};j.prototype.stopSkipIndefinitely=function(){'use strict';this._isSkipIndefinitely=false;if(this._hasSkippedRequest){return this.request();}else return this;};j.prototype.isSkipIndefinitely=function(){'use strict';return this._isSkipIndefinitely;};j.prototype.reset=function(){'use strict';return this.stop().start();};j.prototype.request=function(){'use strict';this._cancelRequest();this._polling=true;if(!this._config.allowNotLoggedIn&&!k())return this._done();if(this._muted)return this;var l=false;this._cancelRequest=function(){l=true;this._cleanup();}.bind(this);if(this._isSkipIndefinitely){this._deferRequest();this._hasSkippedRequest=true;return this;}else this._hasSkippedRequest=false;if(++this._requests>this._config.maxRequests)return this._done();var m=new (c('AsyncRequest'))();m.setIsBackgroundRequest(true);m.setInitialHandler(function(){return !l;});m.setFinallyHandler(this._deferRequest.bind(this));{m.setInitialHandler=c('emptyFunction');m.setFinallyHandler=c('emptyFunction');}this._config.setupRequest(m,this);if(this._skip){this._skip=false;c('setTimeoutAcrossTransitions')(this._deferRequest.bind(this),0);}else m.send();return this;};j.prototype.isPolling=function(){'use strict';return this._polling;};j.prototype.isMuted=function(){'use strict';return this._muted;};j.prototype.setInterval=function(l){'use strict';if(l){this._config.interval=l;this.start();}};j.prototype.getInterval=function(){'use strict';return this._config.interval;};j.prototype._cleanup=function(){'use strict';if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=c('emptyFunction');this._polling=false;};j.prototype._done=function(){'use strict';this._cleanup();this.inform('done',{sender:this});return this;};j.prototype._deferRequest=function(){'use strict';if(!this._polling)return;if(this._requests<this._config.maxRequests){var l=this._config.interval;l=typeof l==='function'?l(this._requests):l;l=l>j.MIN_INTERVAL?l:j.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=c('setTimeout')(this.request.bind(this),l);}else this._handle=c('setTimeoutAcrossTransitions')(this.request.bind(this),l);}else this._done();};j.MIN_INTERVAL=2000;function k(){return c('CurrentUser').isLoggedInNow();}f.exports=j;}),null);
__d('LastActiveTimes',['fbt','ServerTime'],(function a(b,c,d,e,f,g,h){var i={};function j(n){if(!n||n<0)return null;var o=c('ServerTime').get()/1000-n,p=Math.floor(o/60),q=Math.floor(p/60),r=Math.floor(q/24);if(p<=1){return h._({"*":"{count} min"},[h.param('count',1,[0])]);}else if(p<60){return h._({"*":"{count} min"},[h.param('count',p,[0])]);}else if(q<24){return h._({"*":"{count} h"},[h.param('count',q,[0])]);}else if(r<3){return h._({"*":"{count} d"},[h.param('count',r,[0])]);}else return null;}function k(n,o){if(!(n in i)||i[n]<o)i[n]=o;}function l(n){if(n in i){return i[n];}else return 0;}var m={update:function n(o){for(var p in o)k(p,o[p]);},getShortDisplay:function n(o){return j(l(o));},get:function n(o){return l(o);},getDebugData:function n(){return i;}};f.exports=m;}),null);
__d('PresenceStatus',['ArbiterMixin','AvailableListConstants','BanzaiODS','Bootloader','ChatConfig','ChatVisibility','CurrentUser','FBID','LastActiveTimes','PresencePrivacy','ServerTime','createObjectFrom','debounceAcrossTransitions'],(function a(b,c,d,e,f,g){c('BanzaiODS').setEntitySample('presence',.0001);var h={},i={},j={},k={},l=Object.assign({},c('ArbiterMixin')),m=c('debounceAcrossTransitions')(function(){return l.inform('change');},0);function n(o){var p,q=parseInt(o.topic.match(/\d+$/),10),r=parseInt(JSON.parse(o.payload).lat,10),s=Date.now()-r*1000,t=c('ChatConfig').get('active_cutoff')*1000-s;c('LastActiveTimes').update((p={},p[q]=r,p));l.checkPresence(q);if(l.get(q)===c('AvailableListConstants').ACTIVE){clearTimeout(k[q].timeout);k[q].timeout=setTimeout(function(){l.checkPresence(q);},t);}}Object.assign(l,{resetPresenceData:function o(){h={};i={};},reset:function o(){l.resetPresenceData();j={};},get:function o(p){if(p==c('CurrentUser').getID())return c('ChatVisibility').isOnline()?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;if(!c('FBID').isUser(p)&&!k[p]){c('BanzaiODS').bumpEntityKey('presence','page_subscribe');k[p]={};if(c('ChatConfig').get('presence_page_green_dot_sub'))c('Bootloader').loadModules(["RTISubscriptionManager"],function(r){r.subscribe('presence_push/fb/'+p,n);},'PresenceStatus');}var q=c('AvailableListConstants').OFFLINE;if(p in h)q=h[p];if(!c('PresencePrivacy').allows(p))q=c('AvailableListConstants').OFFLINE;return q;},getCapabilities:function o(p){var q=i[p];return q?q:0;},isPlayingCanvasGameUser:function o(p){return !!j[p];},getGroup:function o(p){return p.some(function(q){if(q==c('CurrentUser').getID())return false;return l.get(q)===c('AvailableListConstants').ACTIVE;})?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;},set:function o(p,q,r,s,t,u){if(p==c('CurrentUser').getID())return false;var v;if(q!==null&&q!==undefined){q=q==c('AvailableListConstants').ACTIVE?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;var w=l.get(p);v=w!=q;if((v||q==c('AvailableListConstants').ACTIVE)&&c('FBID').isUser(p)){var x;c('LastActiveTimes').update((x={},x[p]=c('ServerTime').get()/1000,x));}h[p]=q;}var y=false;if(t!==undefined&&t!==null){y=l.getCapabilities(p)!=t;i[p]=t;}var z=v||y;if(z&&!u)m();return z;},setPlayingCanvasGameFriends:function o(p){j=c('createObjectFrom')(p);},getOnlineIDs:function o(){var p,q=[];for(p in h)if(l.get(p)===c('AvailableListConstants').ACTIVE)q.push(p);return q;},getAllIDs:function o(){return Object.keys(h);},getOnlineCount:function o(){return l.getOnlineIDs().length;},getPresenceStats:function o(){var p=0,q=0,r=0;for(var s in h){p+=1;switch(l.get(s)){case c('AvailableListConstants').OFFLINE:q+=1;break;case c('AvailableListConstants').ACTIVE:r+=1;break;default:break;}}return {total:p,offline:q,active:r};},getAllDebugInfo:function o(){var p={};for(var q in h)p[q]={p:h[q],vc:i[q]};return p;},setMultiChatproxy:function o(p){var q={};for(var r in p){if(p[r].lat)q[r]=p[r].lat;var s=p[r].p;l.set(r,s,false,'chatproxy',p[r].vc,true);}c('LastActiveTimes').update(q);m();},setMultiActive:function o(p,q){var r=false;p.forEach(function(s){l.set(s,c('AvailableListConstants').ACTIVE,false,q,null,true)&&(r=true);});if(r)m();},checkPresence:function o(p){var q=false,r=Math.ceil(Date.now()/1000)-c('LastActiveTimes').get(p);l.set(p,r<c('ChatConfig').get('active_cutoff')?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE,false,'pylon',null,true)&&(q=true);if(q)m();}});f.exports=l;}),null);
__d('ChatImpressionLogger',['AsyncSignal','ChatConfig','ChatVisibility','Poller','PresencePrivacy','PresenceStatus','requireWeak','debounceAcrossTransitions'],(function a(b,c,d,e,f,g){var h=null;c('requireWeak')('AvailableList',function(m){return h=m;});var i=null;function j(m){if(!i){m([]);}else i.getSortedList(function(n){return m(n);});}function k(m){if(!i||!h)return '';var n=[];for(var o=0;o<m.length;o++)n[o]=h.get(m[o]);return n.toString();}var l={init:function m(n){i=n;j(function(o){var p,q=o.toString(),r=k(o),s=c('ChatConfig').get('chat_impression_logging_periodical',0);if(s)(function(){var t=c('ChatConfig').get('periodical_impression_logging_config.interval'),u=new (c('Poller'))({interval:t,setupRequest:function v(w){w.setURI('/ajax/chat/imps_logging.php').setData({list_availability:r,sorted_list:q,source:'periodical_imps'});},clearOnQuicklingEvents:false,dontStart:true});c('PresencePrivacy').subscribe('privacy-user-presence-changed',c('debounceAcrossTransitions')(function(){if(c('ChatVisibility').isOnline()){u.start();}else u.stop();}));})();});this.init=function(){};},logImpression:function m(n,o,p){j(function(q){var r=c('ChatConfig').get('chat_impression_logging_with_click'),s={list_availability:r?k(q):'',sorted_list:r?q.toString():'',source:n,target:o,target_presence:c('PresenceStatus').get(o),viewport_width:document.body.clientWidth};new (c('AsyncSignal'))('/ajax/chat/ct.php',Object.assign(s,p)).send();});}};f.exports=l;}),null);
__d('ChatDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('ChatReliabilityTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ChatReliabilityLoggerConfig',this.$ChatReliabilityTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ChatReliabilityLoggerConfig',this.$ChatReliabilityTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ChatReliabilityTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ChatReliabilityTypedLogger1=babelHelpers['extends']({},this.$ChatReliabilityTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$ChatReliabilityTypedLogger1.event=j;return this;};h.prototype.setEventData=function(j){this.$ChatReliabilityTypedLogger1.event_data=j;return this;};var i={event:true,event_data:true};f.exports=h;}),null);
__d("ChatReliabilityEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",CHANNEL_DISCONNECT:"channel_disconnect",CHANNEL_CONNECT:"channel_connect",CHANNEL_INIT:"channel_init",CHANNEL_NOCONFIG:"channel_noconfig",CHANNEL_HISTORY_INVALID:"channel_history_invalid",CHANNEL_STALLED:"channel_stalled",MESSAGE_RECEIVED:"msg_received",THREAD_INFO_ENDPOINT_FATAL:"thread_info_fatal",DFF_ENDPOINT_FATAL:"invalidate_global_state_fatal",DFF_DELTA_INIT:"dff_initiated_by_delta",DFF_HOLE_INIT:"dff_initiated_by_hole"});}),null);
__d('ChatReliabilityInstrumentation',['ChatReliabilityEvents','ChatReliabilityTypedLogger','MercuryConfig'],(function a(b,c,d,e,f,g){'use strict';var h=function j(event,k){if(!c('MercuryConfig').EnableReliabilityLogging)return;new (c('ChatReliabilityTypedLogger'))().setEvent(event).setEventData(k).log();},i={logERROR:function j(k){h(c('ChatReliabilityEvents').ERROR,k);},logCHANNEL_DISCONNECT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_DISCONNECT,k);},logCHANNEL_CONNECT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_CONNECT,k);},logCHANNEL_HISTORY_INVALID:function j(k){h(c('ChatReliabilityEvents').CHANNEL_HISTORY_INVALID,k);},logMESSAGE_RECEIVED:function j(k){h(c('ChatReliabilityEvents').MESSAGE_RECEIVED,k);},logCHANNEL_STALLED:function j(k){h(c('ChatReliabilityEvents').CHANNEL_STALLED,k);},logCHANNEL_INIT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_INIT,k);},logCHANNEL_NOCONFIG:function j(k){h(c('ChatReliabilityEvents').CHANNEL_NOCONFIG,k);},logDFF_DELTA_INIT:function j(k){h(c('ChatReliabilityEvents').DFF_DELTA_INIT,k);},logDFF_HOLE_INIT:function j(k){h(c('ChatReliabilityEvents').DFF_HOLE_INIT,k);}};f.exports=i;}),null);
__d('FantaConst',[],(function a(b,c,d,e,f,g){'use strict';var h={DEFAULT_ALLOWED_RAISED_TABS:2,DEFAULT_MESSAGE_COUNT:10,cookieIDs:{PERSONAL_COOKIE_ID:'t3',PERSONAL_FOCUS_COOKIE_ID:'lm3',PERSONAL_TIME_COOKIE_ID:'utc3',WORK_COOKIE_ID:'t3w',WORK_FOCUS_COOKIE_ID:'lm3w',WORK_TIME_COOKIE_ID:'utc3w'},getCookieIDs:function i(){return [h.cookieIDs.PERSONAL_COOKIE_ID,h.cookieIDs.PERSONAL_FOCUS_COOKIE_ID,h.cookieIDs.PERSONAL_TIME_COOKIE_ID,h.cookieIDs.WORK_COOKIE_ID,h.cookieIDs.WORK_FOCUS_COOKIE_ID,h.cookieIDs.WORK_TIME_COOKIE_ID];}};f.exports=h;}),null);
__d('FBRTCDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('Dcode',[],(function a(b,c,d,e,f,g){var h,i={},j={_:'%',A:'%2',B:'000',C:'%7d',D:'%7b%22',E:'%2c%22',F:'%22%3a',G:'%2c%22ut%22%3a1',H:'%2c%22bls%22%3a',I:'%2c%22n%22%3a%22%',J:'%22%3a%7b%22i%22%3a0%7d',K:'%2c%22pt%22%3a0%2c%22vis%22%3a',L:'%2c%22ch%22%3a%7b%22h%22%3a%22',M:'%7b%22v%22%3a2%2c%22time%22%3a1',N:'.channel%22%2c%22sub%22%3a%5b',O:'%2c%22sb%22%3a1%2c%22t%22%3a%5b',P:'%2c%22ud%22%3a100%2c%22lc%22%3a0',Q:'%5d%2c%22f%22%3anull%2c%22uct%22%3a',R:'.channel%22%2c%22sub%22%3a%5b1%5d',S:'%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a',T:'%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a',U:'%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',V:'%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a',W:'%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a',X:'%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1',Y:'%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',Z:'%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a'};(function(){var l=[];for(var m in j){i[j[m]]=m;l.push(j[m]);}l.reverse();h=new RegExp(l.join("|"),'g');})();var k={encode:function l(m){return encodeURIComponent(m).replace(/([_A-Z])|%../g,function(n,o){return o?'%'+o.charCodeAt(0).toString(16):n;}).toLowerCase().replace(h,function(n){return i[n];});},decode:function l(m){return decodeURIComponent(m.replace(/[_A-Z]/g,function(n){return j[n];}));}};f.exports=k;}),null);
__d('PresenceCookieManager',['Cookie','CurrentUser','Dcode','ErrorUtils','JSLogger','PresenceInitialData','PresenceUtil','WebStorage','WorkModeConfig'],(function a(b,c,d,e,f,g){var h=c('PresenceInitialData').cookieVersion,i='presence',j={},k=null,l=null,m=c('JSLogger').create('presence_cookie');function n(y){var z=c('Cookie').get(i)||'';if(z.length===0)return null;if(z[0]!==y)return null;return z.substring(1);}function o(y,z){c('Cookie').set(i,y+z);}function p(){if(!(c('PresenceInitialData').useWebStorage||false))return null;return c('WebStorage').getSessionStorage();}function q(){var y=p(),z=y!=null?y.getItem(i):null;if(z!=null)return z.substring(1);return null;}function r(y){var z=p();if(z==null)return false;z.setItem(i,'E'+y);return true;}function s(){var y=q();if(y!=null)return y;return n('E');}function t(y){var z=y.state;if(z==null)return '';var aa=n('S')||'',ba=c('WorkModeConfig').is_work_user?'w':'f',ca=c('WorkModeConfig').is_work_user?z.t3w:z.t3,da=ca!=null?ca.length>0:false,ea=aa.indexOf(ba)!==-1;if(ea&&!da)aa=aa.replace(ba,'');if(!ea&&da)aa+=ba;return aa;}function u(y,z){var aa=r(y);if(aa){o('S',z);}else{if(y.length>1024)m.warn('big_cookie',y.length);o('E',y);}}function v(){try{var y=s();if(k!==y){k=y;l=null;if(y){y=c('Dcode').decode(y);l=JSON.parse(y);}}if(l){if(l.user&&l.user!==c('CurrentUser').getID())return null;if(l.v!==h)return null;return l;}}catch(z){m.warn('getcookie_error',z);}return null;}function w(){return parseInt(Date.now()/1000,10);}var x={register:function y(z,aa){j[z]=aa;},store:function y(){var z=v();if(z&&z.v&&h<z.v){m.debug('stale_cookie',h);return;}var aa={v:h,time:w(),user:c('CurrentUser').getID()};for(var ba in j)aa[ba]=c('ErrorUtils').applyWithGuard(j[ba],j,[z&&z[ba]],function(da){da.presence_subcookie=ba;});var ca=c('Dcode').encode(JSON.stringify(aa));if(c('PresenceUtil').hasUserCookie())u(ca,t(aa));},clear:function y(){c('Cookie').clear(i);var z=c('WebStorage').getSessionStorage();if(z!=null)z.removeItem(i);},getSubCookie:function y(z){var aa=v();if(!aa)return null;return aa[z];}};f.exports=x;}),null);
__d('PresenceState',['Arbiter','ErrorUtils','FantaConst','JSLogger','PresenceCookieManager','debounceAcrossTransitions','setIntervalAcrossTransitions','PresenceInitialData'],(function a(b,c,d,e,f,g){'use strict';var h=c('PresenceInitialData').cookiePollInterval||2000,i=c('PresenceInitialData').shouldSuppress||false,j=[],k=[],l=null,m=null,n=0,o=null,p=0,q=['sb2','tr','tw','at','wml'].concat(c('FantaConst').getCookieIDs()),r=c('JSLogger').create('presence_state');function s(){return c('PresenceCookieManager').getSubCookie('state');}function t(){n=Date.now();c('PresenceCookieManager').store();x(m);}var u=c('debounceAcrossTransitions')(t,0);function v(ca){if(ca==undefined||isNaN(ca)||ca==Number.POSITIVE_INFINITY||ca==Number.NEGATIVE_INFINITY)ca=0;return ca;}function w(ca){var da={};if(ca){q.forEach(function(ga){if(ca&&ca[ga])da[ga]=ca[ga];});if(n<ca.ut)r.error('new_cookie',{cookie_time:ca.ut,local_time:n});}da.ut=n;for(var ea=0,fa=j.length;ea<fa;ea++)c('ErrorUtils').applyWithGuard(j[ea],null,[da]);m=da;return m;}function x(ca){p++;n=v(ca&&ca.ut);if(!l)l=c('setIntervalAcrossTransitions')(aa,h);m=ca;if(o===null)o=ca;for(var da=0,ea=k.length;da<ea;da++)c('ErrorUtils').applyWithGuard(k[da],null,[ca]);p--;}function y(ca){if(ca&&ca.ut)if(n<ca.ut){return true;}else if(ca.ut<n)r.error('old_cookie',{cookie_time:ca.ut,local_time:n});return false;}function z(){var ca=s();if(y(ca))m=ca;return m;}function aa(){var ca=s();if(y(ca))x(ca);}c('PresenceCookieManager').register('state',w);c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(ca,da){da.presence_state={initial:babelHelpers['extends']({},o),state:babelHelpers['extends']({},m),update_time:n,sync_paused:p,poll_time:h};});(function(){var ca=z();if(ca){x(ca);}else{r.debug('no_cookie_initial');x(w());return;}})();var ba={doSync:function ca(da){if(p)return;if(da){t();}else u();},registerStateStorer:function ca(da){j.push(da);},registerStateLoader:function ca(da){k.push(da);},get:function ca(){return z();},getInitial:function ca(){return o;},shouldSuppress:function ca(){return i;},verifyNumber:v};f.exports=ba;}),null);
__d("MercuryParticipantTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({USER:"user",THREAD:"thread",EVENT:"event",PAGE:"page",FRIEND:"friend",FB4C:"fb4c",NON_FRIEND:"non_friend",SERVICE:"service"});}),null);
__d('MercuryIDs',[],(function a(b,c,d,e,f,g){'use strict';var h={isValid:function i(j){if(!j||typeof j!=='string')return false;return /^\w{3,12}:.+/.test(j);},isValidThreadID:function i(j){if(!h.isValid(j))return false;var k=h.tokenize(j);switch(k.type){case 'user':case 'group':case 'support':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function i(j){if(!j||!h.isValid(j))throw new Error('bad_id_format '+String(j));var k=j.indexOf(':');return {type:j.substr(0,k),value:j.substr(k+1)};},getUserIDFromParticipantID:function i(j){if(!h.isValid(j))throw new Error('bad_id_format '+j);var k=h.tokenize(j),l=k.type,m=k.value;return l==='fbid'?m:null;},getParticipantIDFromUserID:function i(j){if(isNaN(j))throw new Error('Not a user ID: '+j);return 'fbid:'+j;},getUserIDFromThreadID:function i(j){if(!this.isCanonical(j))return null;return this.tokenize(j).value;},getThreadIDFromUserID:function i(j){return 'user:'+j;},getThreadIDFromThreadFBID:function i(j){return 'thread:'+j;},getThreadIDFromSupportInboxItemID:function i(j){return 'support:'+j;},getThreadFBIDFromThreadID:function i(j){return this.tokenize(j).value;},getThreadIDFromParticipantID:function i(j){var k=this.getUserIDFromParticipantID(j);return k?this.getThreadIDFromUserID(k):null;},getParticipantIDFromFromThreadID:function i(j){var k=this.getUserIDFromThreadID(j);return k?this.getParticipantIDFromUserID(k):null;},getSupportInboxItemIDFromThreadID:function i(j){return this.tokenize(j).value;},isCanonical:function i(j){return this.isValid(j)&&this.tokenize(j).type==='user';},isGroupChat:function i(j){return this.isValid(j)&&this.tokenize(j).type!=='user';},isLocalThread:function i(j){return this.isValid(j)&&this.tokenize(j).type==='root';}};f.exports=h;}),null);